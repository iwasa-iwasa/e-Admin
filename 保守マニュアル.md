# e-Admin 保守マニュアル

## 目次
1. [祝日データの更新](#祝日データの更新)
2. [システムの起動方法](#システムの起動方法)
3. [トラブルシューティング](#トラブルシューティング)

---

## 祝日データの更新

カレンダーに表示される日本の祝日は、自動的に計算されるライブラリを使用しています。
法改正などで祝日が変更された場合、以下の手順で更新してください。

### 更新頻度
**年1回（毎年1月頃）** に実行することを推奨します。

### 更新手順

#### Windows の場合

1. **コマンドプロンプトまたはPowerShellを開く**
   - `Win + R` キーを押す
   - `cmd` と入力してEnterキー

2. **プロジェクトフォルダに移動**
   ```bash
   cd （e-Adminフォルダのパス）
   ```
   例: `cd C:\xampp\htdocs\e-Admin`

3. **祝日ライブラリを更新**
   ```bash
   npm update @holiday-jp/holiday_jp
   ```

4. **フロントエンドをビルド**
   ```bash
   npm run build
   ```

5. **完了**
   - ブラウザでカレンダーを開いて、祝日が正しく表示されることを確認してください

#### Mac / Linux の場合

1. **ターミナルを開く**

2. **プロジェクトフォルダに移動**
   ```bash
   cd （e-Adminフォルダのパス）
   ```
   例: `cd /var/www/e-Admin`

3. **祝日ライブラリを更新**
   ```bash
   npm update @holiday-jp/holiday_jp
   ```

4. **フロントエンドをビルド**
   ```bash
   npm run build
   ```

5. **完了**
   - ブラウザでカレンダーを開いて、祝日が正しく表示されることを確認してください

---

## システムの起動方法

### 開発環境での起動

1. **データベースの起動**（別のターミナル）
   ```bash
   php artisan serve
   ```

2. **フロントエンドの起動**（別のターミナル）
   ```bash
   npm run dev
   ```

3. **ブラウザでアクセス**
   - http://localhost:8000

### 本番環境（Render）へのデプロイ

1. **Gitにコミット**
   ```bash
   git add .
   git commit -m "祝日データ更新"
   git push origin main
   ```

2. **Renderが自動デプロイ**
   - Renderのダッシュボードでデプロイ状況を確認
   - 数分で完了します

---

## トラブルシューティング

### 祝日が表示されない

**原因**: ライブラリが正しくインストールされていない

**解決方法**:
```bash
npm install @holiday-jp/holiday_jp
npm run build
```

### ビルドエラーが出る

**原因**: node_modulesが破損している

**解決方法**:
```bash
# node_modulesを削除
rm -rf node_modules
# または Windows の場合
rmdir /s /q node_modules

# 再インストール
npm install
npm run build
```

### カレンダーが表示されない

**原因**: キャッシュの問題

**解決方法**:
1. ブラウザのキャッシュをクリア（Ctrl + Shift + Delete）
2. ページをリロード（Ctrl + F5）

---

## 技術情報

### 使用している祝日ライブラリ
- **ライブラリ名**: `@holiday-jp/holiday_jp`
- **対応期間**: 1948年以降の全祝日
- **特徴**:
  - 春分の日・秋分の日も正確に計算
  - 振替休日も自動判定
  - 法改正に対応（ライブラリ更新で反映）

### 参考リンク
- [holiday_jp GitHub](https://github.com/holiday-jp/holiday_jp)
- [内閣府 国民の祝日について](https://www8.cao.go.jp/chosei/shukujitsu/gaiyou.html)

---

## お問い合わせ

システムに関する質問や不具合がある場合は、開発元にお問い合わせください。

**最終更新日**: 2025年1月
