
# Laravel + Vue.js SPAの機能実装とUI改善

## 概要
現在ハードコーディングされているダミーデータをデータベースに移行し、認証フローを整備し、UIの不具合を修正する。
各フェーズのタスクを順番に実行してください。

---

## フェーズ1: 認証とリダイレクト処理の実装

1.  **ルートURL(`/`)へのリダイレクト処理の追加**
    *   `routes/web.php` を開き、ルートURL (`/`) へのGETリクエストを処理するルート定義を追加します。
    *   このルートでは、認証状態に応じてリダイレクト先を振り分けます。
        *   **認証済みの場合**: ダッシュボード (`/dashboard`) へリダイレクトします。
        *   **未認証の場合**: 新しく作成するログイン/新規登録ページ (`/welcome`) へリダイレクトします。

2.  **ログイン/新規登録ページの作成**
    *   `routes/web.php` に、`/welcome` のルートを追加し、`resources/js/Pages/Welcome.vue` を表示するように設定します。
    *   `resources/js/Pages/Welcome.vue` ファイルを新規作成します。このページには、ログインページへのリンクと新規登録ページへのリンクを含めてください。

---

## フェーズ2: データベースへのデータ移行

1.  **現状分析**
    *   `glob`ツールを使い、`database/migrations` ディレクトリ内のすべてのマイグレーションファイルをリストアップし、テーブル構造を把握してください。
    *   `glob`ツールを使い、`resources/js/Pages` および `resources/js/components` ディレクトリ内のすべてのVueファイルをリストアップしてください。
    *   各Vueファイルを `read_file` で読み込み、ハードコーディングされているダミーデータ（`<script setup>`内の配列やオブジェクトなど）を特定し、どのページのどのデータがどのテーブルに対応するかを分析してください。

2.  **Seederの作成と実行**
    *   分析したデータ構造に基づき、対応するテーブルのSeederファイルを `php artisan make:seeder <SeederName>` コマンドで作成してください。（例: `EventSeeder`, `NoteSeeder`など）
    *   作成したSeederファイルに、Vueコンポーネントから特定したダミーデータを元にしたデータ作成処理を記述してください。
    *   `database/seeders/DatabaseSeeder.php` を編集し、作成したすべてのSeederを呼び出すように設定してください。
    *   `database/seeders/DatabaseSeeder.php` または `UserFactory.php` を利用して、ログインテスト用のユーザーを1つ作成してください。（例: `email: test@example.com`, `password: password`）
    *   `php artisan migrate:fresh --seed` コマンドを実行して、データベースを再構築し、データを投入してください。

3.  **データ取得ロジックの置き換え**
    *   各ページに対応するLaravelのコントローラー（例: `DashboardController`, `CalendarController`）を修正、または新規作成してください。
    *   コントローラー内で、Eloquentモデルを使ってデータベースからデータを取得し、Inertia経由でVueコンポーネントにPropsとして渡すように実装してください。
    *   各Vueコンポーネントを修正し、ハードコーディングされたダミーデータを削除して、Propsから渡されたデータを表示するように書き換えてください。

---

## フェーズ3: UI/UXの改善

1.  **レイアウトの不具合修正**
    *   `resources/js/Layouts/AuthenticatedLayout.vue` とその関連コンポーネントを調査してください。
    *   `現在のレイアウト画像.png` で見られる、コンテンツの背景が黒く半透明になっている問題の原因となっているCSS（例: `bg-black`, `opacity`）を特定し、`正しいレイアウト画像.png` のようにクリーンな背景になるように修正してください。

2.  **アクティブなナビゲーションリンクのスタイリング**
    *   サイドバーコンポーネント（`resources/js/components/AppSidebar.vue` や `resources/js/components/NavLink.vue` など）を修正します。
    *   Inertia.jsが提供する `$page.url` を利用して、現在表示しているページのURLと一致するナビゲーションリンクに、アクティブ状態を示すためのCSSクラス（例: `bg-gray-900 text-white`）を動的に適用してください。
    *   `正しいレイアウト画像.png` を参考に、アクティブな「ホーム」リンクが黒い背景に白いテキストで表示されるように実装してください。

3.  **プロフィール設定の確認**
    *   プロフィール設定ページ (`resources/js/Pages/Profile/Edit.vue`) を開き、ログイン中のユーザー情報が正しく表示・更新できることを確認してください。

---

## 最終確認

すべてのタスクが完了したら、以下の手順で動作確認を行ってください。

1.  `npm run dev` と `php artisan serve` を実行してアプリケーションを起動します。
2.  ブラウザで `http://localhost:8000` にアクセスし、未ログイン状態ではウェルカムページに、ログイン状態ではダッシュボードにリダイレクトされることを確認します。
3.  テストアカウントでログインし、各ページでデータベースから取得したデータが正しく表示されることを確認します。
4.  ページを遷移した際に、レイアウトの表示崩れがなく、アクティブなナビゲーションリンクのスタイルが正しく適用されることを確認します。
